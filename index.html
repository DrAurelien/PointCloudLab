<html>

<head>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script id="VertexShader" type="x-shader/x-vertex">
		attribute vec3 VertexPosition;
		attribute vec3 NormalVector;
		uniform mat4 ModelView;
		uniform mat4 Projection;
		uniform mat4 ShapeTransform;
		
		//Lighting model
		uniform vec3 EyePosition;
		uniform vec3 LightPosition;
		uniform vec3 Color;
		uniform float DiffuseCoef;
		uniform float AmbiantCoef;
		uniform float SpecularCoef;
		uniform float GlossyPow;
		
		varying highp vec3 vLighting;

		void main(void) {
			gl_PointSize = 5.0;
			gl_Position = Projection * ModelView * ShapeTransform * vec4(VertexPosition, 1.0);
			
			highp vec3 ambientLight = vec3(0.4, 0.4, 0.4);
			highp vec3 directionalLightVector = vec3(0.85, 0.8, 0.75);
			
			//Phong lighting
			highp vec3 eyeVect = EyePosition - VertexPosition;
			eyeVect /= length(eyeVect);
			highp vec3 lightVect = LightPosition - VertexPosition;
			lightVect /= length(lightVect);
			highp vec3 reflVec = 2.0 * dot(NormalVector, lightVect) * (NormalVector-lightVect);
			reflVec /= length(reflVec);
			
			vLighting = Color * ((
				AmbiantCoef +
				DiffuseCoef * dot(NormalVector, eyeVect) +
				SpecularCoef * pow(dot(eyeVect, reflVec), GlossyPow)
			)/(AmbiantCoef+DiffuseCoef+SpecularCoef));
		}
	</script>
	<script id="FragmentShader" type="x-shader/x-fragment">
		varying highp vec3 vLighting;
		
		void main(void) {
			gl_FragColor = vec4(vLighting, 1);
		}
	</script>
	<script type="text/javascript" src="vector.js"></script>
	<script type="text/javascript" src="matrix.js"></script>
	<script type="text/javascript" src="material.js"></script>
	<script type="text/javascript" src="shapes.js"></script>
	<script type="text/javascript" src="controls.js"></script>
	<script type="text/javascript" src="renderer.js"></script>
	<script type="text/javascript" src="data.js"></script>
	<script type="text/javascript" src="interface.js"></script>
	<script type="text/javascript">
		var Scene =
		{
			objects : [
				//new Sphere(new Vector( [.0,.0,.0]), 2.0),
				//new Cylinder(new Vector([-3, 0, 0]), new Vector([1, 1, 1]), 0.5, 2)
			],
			
			Draw : function(drawingContext)
			{
				for(index=0; index<this.objects.length; index++)
				{
					this.objects[index].Draw(drawingContext);
				}
			}
		};
	</script>
</head>

<body onload="Interface.Initialize(Scene);">
</body>

</html>